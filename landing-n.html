<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>A-Frame test component Component - Basic</title>
    <meta
      name="description"
      content="Basic example for troika-text component."
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!--script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script-->
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="aframe-troika-text.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autosize.js/4.0.2/autosize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src="jquery-3.3.1.js"></script>
    <script src="font-awesome-5.13.0.js"></script>
    <script src="merge-image.js"></script>
    <link rel="stylesheet" href="style-capture.css" />
    <script src="https://unpkg.com/aframe-animation-component@%5E3.2.x/dist/aframe-animation-component.min.js"></script>
      <script src="https://cdn.rawgit.com/tizzle/aframe-orbit-controls-component/master/dist/aframe-orbit-controls-component.min.js">
      <script>
    /* global AFRAME, THREE */

// shader-grid-glitch.js

AFRAME.registerShader('grid-glitch', {
  schema: {
    color: {type: 'color', is: 'uniform'},
    timeMsec: {type: 'time', is: 'uniform'}
  },

  vertexShader: `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,
  fragmentShader: `
varying vec2 vUv;
uniform vec3 color;
uniform float timeMsec; // A-Frame time in milliseconds.

void main() {
  float time = timeMsec / 1000.0; // Convert from A-Frame milliseconds to typical time in seconds.
  // Use sin(time), which curves between 0 and 1 over time,
  // to determine the mix of two colors:
  //    (a) Dynamic color where 'R' and 'B' channels come
  //        from a modulus of the UV coordinates.
  //    (b) Base color.
  // 
  // The color itself is a vec4 containing RGBA values 0-1.
  gl_FragColor = mix(
    vec4(mod(vUv , 0.05) * 20.0, 1.0, 1.0),
    vec4(color, 1.0),
    sin(time)
  );
}
`
});

   </script>
   
     <script>
    /* global AFRAME, THREE */

// shader-grid-glitch.js

AFRAME.registerShader('star-test', {
  schema: {
    timeMsec: {type: 'time', is: 'uniform'}
  },

  vertexShader: `
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,
  fragmentShader: `
varying vec2 vUv;
uniform float timeMsec; // A-Frame time in milliseconds.

mat2 Rot(float a)
{
  float s = sin(a);
  float c = cos(a);
  return mat2(c, -s, s, c);
}

void main() {
vec2 uv = vUv;
  // vUv -= 0.5;
  float time = timeMsec / 1000.0; // Convert from A-Frame milliseconds to typical time in seconds.
  vec3 col = vec3(0.0);
  // light source
  float t = (sin(time) + 1.0) * 2.0;
  
  // sun
  vec2 pos = vec2(vUv.x - 0.75, vUv.y - 0.75);
  float d = length(pos);
  float m = 0.025 / d;
  // float m = smoothstep(0.0, 0.01,d - 0.2);
  col += m;
  
  // star
  pos.x += 0.2;
  d = length(pos);
  m = 0.0025 / d;
  col += m;
  // rays
  // pos *= Rot(3.1415 * 4.0);
  float rays = max(0.0, 0.005 - abs(pos.x * pos.y * 100.0));
  col += rays;
  // 45 degree rays
  // ROT in radians
  pos *= Rot(3.1415 / 4.0);
  rays = max(0.0, 0.005 - abs(pos.x * pos.y * 100.0));
  col += rays; //  * 0.3; 
  
  
  gl_FragColor = vec4(col, 1.0);
}
`
});

   </script>
    
    <script type="text/javascript">
      setTimeout(function(){
    //    alert("로딩 후 10초 지남");
         document
          .getElementById("message").style.display="inline-block";
        document
          .getElementById("find").style.display="inline-block";
      }, 22000);
     
    
    </script>
    <script>
      var opacity = 0;
      var intervalID = 0;
                 
      window.onload = function() {
      
        var obj = document.getElementById("button-1");
        obj.addEventListener("click", function(event) {
            intervalID = setInterval(hide,100);
            HideZone = "";
            var WaitingMsg = document.createElement("div");
            WaitingMsg.innerHTML = "<h1>미키문으로 안내해 드릴께요</h1>";
            WaitingMsg.setAttribute("id", "Wait");
            WaitingMsg.setAttribute("class", "typewriter");
            document.body.appendChild(WaitingMsg);
          
            var ani = document.querySelector(".typewriter");

            ani.addEventListener("animationend", function(e) {
                console.log("종료");                
                WaitingMsg.style.WebkitAnimation = "fadeOut 3s";
                window.setTimeout(MovePage, 2000);                            
              });
             });
      }
    
      
      function hide() {
        
        var EffectZone = document.getElementById("box-2");
          opacity = Number(window.getComputedStyle(EffectZone).getPropertyValue("opacity"));
      
          if(opacity>0){
            //Fade out 핵심 부분
             opacity = opacity-0.1;
             EffectZone.style.opacity = opacity;
             //img.style.opacity=opacity;
          }
          else{
             clearInterval(intervalID);
          }
       }
      
      function MovePage() {
        window.open('https://wind-noble-preface.glitch.me/disney-loc2.html','_self');
      }
        
    </script>
         <style>
    
    .typewriter h1{
       position: absolute;
       top: 50%;
       left: 15%;
      font-size: 24px;
      color: white;
       overflow: hidden; /* Ensures the content is not revealed until the animation */
       border-right: .1em solid orange; /* The typwriter cursor */
       white-space: nowrap; /* Keeps the content on a single line */
       margin: 0 auto; /* Gives that scrolling effect as the typing happens */
       letter-spacing: .1em; /* Adjust as needed */
       animation: 
         typing 3.5s steps(30, end),
         blink-caret .5s step-end infinite;
       display: inline-block;    
    }

    /* The typing effect */
    @keyframes typing {
      from { width: 0 }
      to { width: 50% }
    }

    /* The typewriter cursor effect */
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: orange; }
    }
      
    
      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
     }
           
    </style>   
        <style>
      @import url("https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf");
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :colors {
        color: hsl(212, 21%, 14%);
        color: hsl(212, 21%, 14%);
        color: hsl(212, 21%, 14%);
      }
      .container {
        position: absolute;
        top: 40%;
        left: 2%;
        width: 100%;
        height: 100%;
        background-image: url("");
        background-size: cover;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 99999;
      }

      p {
        color: white;
        font-size: 14px;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 20px 0;
      }
      #letter {
        letter-spacing: 0.5em;
      }
      h2 {
        color: white;
        font-size: 40px;
 font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 20px 0;
      }
                  h3 {
          color: white;
          font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
          font-size: 20px;
        }
 
      h4 {
        color: black;
         font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 20px 0;
      }


    </style>
 

        <style>
      @import url("https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf");
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :colors {
        color: hsl(212, 21%, 14%);
        color: hsl(212, 21%, 14%);
        color: hsl(212, 21%, 14%);
      }
      .container {
        width: 100%;
        height: 95vh;
        background-size: contain;
        background-image: url("");
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .card {
        margin-top: 30px;
        width: 95%;
        height: 100px;
        display: flex;
        border-radius: 10px;
        background-size: contain;
      }
      .box-1 {
        margin-top: 30px;
        width: 100%;
        height: 100%;
        background: url("https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/mickeymoon-100.png?v=1670561714724");
        background-position: center;
        background-repeat: no-repeat;
        background-size: contain;
        justify-content: center;
        align-items: center;
      }

      .box-2 {
        margin-top: 30px;
        width: 50%;
        height: 100%;
        margin: 20px;
        background-size: contain;
      }
      p {
        color: white;
        font-size: 14px;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 20px 0;
        letter-spacing: -25%;
      }
      letter {
        letter-spacing: -25%;
      }
      h2 {
        color: white;
        font-size: 52px;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: bold;
        font-style: normal;margin: 20px 0;
        letter-spacing: -25%;
      }
      .Price {
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin-bottom: 50px;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 20px 0;
      }
      h4 {
        color: white;
        font-size: 50px;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 20px 0;
        letter-spacing: -25%;
      }
      button {
        font-size: 50px;
        background-color: hsl(0, 100, 100);
        color: black;
        padding: 20px 0px;
        text-align: center;
        width: 100%;
        font-weight: 700;
        border: none;
        outline: none;
        border-radius: 10px;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 10px 0;
        cursor: pointer;
      }
      button:hover {
        background-color: #1D2087;
        color: #fff;
        font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
        font-weight: normal;
        font-style: normal;margin: 10px 0;
        cursor: pointer;      
      }
      i {
        margin-right: 10px;
      }
      @media only screen and (max-width: 700px) {
        .card {
          flex-direction: column;
          margin: 30px;
          width: 100%;
          height: 100%;
          border-radius: 10px;
          background-size: contain;
          justify-content: center;
          align-items: center;
        }
        .box-1 {
          top-margin: 30px;
          margin: 10px;
          width: 100%;
          height: 100%;
          background: url("https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/mickeymoon-100.png?v=1670561714724");
          background-position: center;
          background-repeat: no-repeat;
          border-radius: 10px 10px 0 0;
          background-size: contain;
          justify-content: center;
          align-items: center;
        }
        .box-2 {
          width: 100%;
          padding: 10px;
          margin: 10px;
          position: relative;
          background-size: contain;

        }
        h2 {
        h2 {
          font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
          font-size: 72px;
          font-weight: bold;
        }

        h3 {
           color: white;
          font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
          font-size: 24px;
          font-weight: bold;
        }
        h5 {
          color: white;
          font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
          font-size: 18px;
          font-weight: bold;
          letter-spacing: -25%;
        }
        p {
          
          margin: 10px;
          font-family: "AppleSDGothicNeoM";
        src: url('https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoM.ttf?v=1671085239370') format('ttf');
          letter-spacing: -25%;
        }
      }
      .landing_btn {
        position: absolute;
        top: 32%;
        left: 10%;
        width: 80%;
      }
    </style>

      
  </head>
  <body style="margin: 0px; overflow: hidden">

    <div class="container">
      <div class="card">
        <p>&nbsp</p>
        <!--div class="box-1"></div-->
        <div align="center" class="box-2">
          <p id="letter">미키문이 뜨기까지 남은 시간</p>
          <h2 id="remain-time" font="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/AppleSDGothicNeoB.ttf?v=1671714466678"></h2>
          <p><h3>     
            미키문을 보기 전에<br>
            곳곳에 숨은 미키를 찾아 보세요!
          </h3>
          </p> 
          <img src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/Landing_Button1_s.png?v=1671161209598" 
               class="landing_btn"
               onclick="window.open('https://a-portal.glitch.me/landing-ready.html','_self');"
                 />
        </div>
          <!--button type="button" class="button" style="font-size: 20px" onclick="window.open('https://a-portal.glitch.me/landing-ready.html','_self');">

           
             미키 찾으러 가기
            
          </button-->

          <!--img id="button-1" src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/Landing_Button1_s.png?v=1671161209598" 
               class="landing_btn"
                              -->

        </div>
      </div>

  

        <a-scene
          vr-mode-ui="enabled: false"
          loading-screen="enabled: false"
          device-orientation-permission-ui="enabled: false"
                       cursor="fuse: false; rayOrigin: mouse"
      raycaster="objects: [clickhandler];"
      cursor-modifier
        >

          <a-assets>

            <audio id="aud" src="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/disney-intro-1.mp3?v=1666075254104"></audio>
            <a-img id="sky" src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/360bg-cut.png?v=1671171073616"/>
          </a-assets>
         <!--a-entity camera="active: true" look-controls wasd-controls position="0 0 5" data-aframe-default-camera></a-entity-->
         <a-camera></a-camera>
          <a-entity>
            <!--a-gltf-model
              rotation="0 0 0"
              position="1 -1.35 -3.4"
              scale="100 0 0"
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/space.glb?v=1671159360082"
              class="hat2-entity"
              animation-mixer
              
            ></a-gltf-model-->
          </a-entity>
          <a-entity>
            <a-gltf-model
              id="balloon"
              rotation="0 -180 0"
              position="0 1 -3.5"
              scale="0.008 0.008 0.008"
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/MickeyMoon_.glb?v=1670667532695"
              class="glasses2-entity"
              material="shader: flat"
              animation="property: scale; to: 0.03 0.03 0.03; delay: 3000; dur: 10000; easing: linear; loop: false"
              animation__2="property: rotation; to: 0 360 0; delay: 13000; dur: 10000; easing: linear; loop: false"
              animation__3="property: position; to: 0 5 -13.5; delay: 20000; dur: 10000; easing: linear; loop: false"
              ></a-gltf-model>
            <!--a-sphere material="shader:star-test;"
                radius="11"
	              segments-width="24"
	              segments-height="64"
                position="0 -5 -5"
                side="back">
              </a-sphere-->
                             <a-gltf-model
                                           id="astro"
              rotation="0 0 0"
              position="0 1.5 -4"
              scale="1 1 1"
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/cute_astronaut.glb?v=1672178934643"
              class="glasses2-entity"
              animation-mixer
              animation="property: scale; to: 2 2 2; delay: 3000; dur: 10000; easing: linear; loop: false"
              animation__2="property: rotation; to: 0 360 0; delay: 13000; dur: 10000; easing: linear; loop: false"
              animation__3="property: position; to: 0 5 -12.5; delay: 20000; dur: 10000; easing: linear; loop: false"
              ></a-gltf-model>
                     <a-gltf-model
              rotation="0 120 0"
              position="-5 1.1 -3.7"
              scale="0.2 0.2 0.2"
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/rocket_history.glb?v=1672071139188"
              class="glasses2-entity"   
              animation="property: position; to: 15 8 -12.5; delay: 1000; dur: 10000; easing: linear; loop: false"
              
              ></a-gltf-model>
                                 <a-gltf-model
              rotation="0 0 0"
              position="10 0 -1.5"
              scale="3 3 3"
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/retro_ufo.glb?v=1672072081458"
              class="glasses2-entity"   
              animation-mixer
              animation="property: position; to: -15 8 -13.5; delay: 1000; dur: 10000; easing: linear; loop: false"
              ></a-gltf-model>
                        <a-image 
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/Landing3.png?v=1670561453753" 
              position="0 4 -3.9"
              scale="1 0.7 1"
             ></a-image>
            <a-image 
              src="https://cdn.glitch.global/3d3ecbaf-67a2-4d22-b8ec-ad23b8be5288/message7.png?v=1671687242277" 
              position="0 2.5 -3.9"
              scale="8 8 8"
              animation="property: scale; to: 10 10 10; delay: 3000; dur: 3000; easing: linear; loop: true"
             ></a-image>
          </a-entity>
                <a-entity
        id="balloon1"
        light="type: point; intensity: 1.3; distance: 50; castShadow: true" positon="0 1 -8.5"
      ></a-entity>
               <a-entity
        id="astro1"
        light="type: point; intensity: 1.3; distance: 50; castShadow: true" positon="0 -1 -8.5"
      ></a-entity>
          <!--a-entity light="type: hemisphere; color: white; groundColor: #black; intensity: 5"></a-entity-->
          <!--a-entity light="type: spot; angle: 45"></a-entity-->
 
         

          <a-sky color="#2b3784" src="#sky"></a-sky>
          <a-entity light="type: ambient; intensity: 0.1;"></a-entity>
          <a-entity>
                <a-light
        type="directional"
        light="castShadow: true;
                      shadowMapHeight: 1024;
                      shadowMapWidth: 1024;
                      shadowCameraLeft: -7;
                      shadowCameraRight: 5;
                      shadowCameraBottom: -5;
                      shadowCameraTop: 5;"
        id="light"
        target="balloon"
        position="-5 3.6 -10"
      >
      </a-light>
      </a-entity>
        </a-scene>


    </body>
     <script>
        var office = document.getElementById( 'gltf' );

        office.addEventListener( 'object3dset', () => {

            const mesh = office.getObject3D( 'mesh' );
            mesh.children[0].material = new THREE.MeshBasicMaterial({map: mesh.children[0].material.map});
        } );
    </script>
   <script>
    /*
Inspired by Florin Pop's coding challenges, you can check them here: https://www.florin-pop.com/blog/2019/03/weekly-coding-challenge/
*/

function loading() {
  document.querySelectorAll(".bar").forEach(function(current) {
    let startWidth = 0;
    const endWidth = current.dataset.size;
    
    /* 
    setInterval() time sholud be set as trasition time / 100. 
    In our case, 2 seconds / 100 = 20 milliseconds. 
    */
    const interval = setInterval(frame, 20);

    function frame() {
      if (startWidth >= endWidth) {
        clearInterval(interval);
      } else {
          startWidth++;
          current.style.width = `${endWidth}%`;
          current.firstElementChild.innerText = `${startWidth}%`;
        }
     }
  });
}

setTimeout(loading, 100);
    </script>
   <script>
    const remainTime = document.querySelector("#remain-time");

function diffDay() {
    const masTime = new Date("2023-01-01");
    const todayTime = new Date();
    
    const diff = masTime - todayTime;

    const diffDay = String(Math.floor(diff / (1000*60*60*24)));
 //   const diffHour =String( Math.floor((diff / (1000*60*60)) % 24)).padStart(2,"0");
    const diffHour =String( Math.floor((diff / (1000*60*60)))).padStart(2,"0");
    const diffMin = String(Math.floor((diff / (1000*60)) % 60)).padStart(2,"0");
    const diffSec = String(Math.floor(diff / 1000 % 60)).padStart(2,"0");
    
 //   remainTime.innerText = `${diffDay}일 ${diffHour}시간 ${diffMin}분 ${diffSec}초`;
    remainTime.innerText = `${diffHour}:${diffMin}:${diffSec}`;
}

diffDay();
setInterval(diffDay, 1000);
    </script>

</html>